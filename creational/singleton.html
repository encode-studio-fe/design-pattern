<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>单例模式 | 印客学院</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/design-pattern/img/logo.png">
    <meta name="description" content="设计模式深入浅出">
    <meta name="keywords" content="设计模式深入浅出">
    
    <link rel="preload" href="/design-pattern/assets/css/0.styles.ed4adf79.css" as="style"><link rel="preload" href="/design-pattern/assets/js/app.de21f0f6.js" as="script"><link rel="preload" href="/design-pattern/assets/js/2.917b5265.js" as="script"><link rel="preload" href="/design-pattern/assets/js/10.92b2c58c.js" as="script"><link rel="prefetch" href="/design-pattern/assets/js/11.4a3e4eec.js"><link rel="prefetch" href="/design-pattern/assets/js/12.56f42032.js"><link rel="prefetch" href="/design-pattern/assets/js/13.f72224a7.js"><link rel="prefetch" href="/design-pattern/assets/js/3.8eeab88a.js"><link rel="prefetch" href="/design-pattern/assets/js/4.6d8faa13.js"><link rel="prefetch" href="/design-pattern/assets/js/5.55c01ae8.js"><link rel="prefetch" href="/design-pattern/assets/js/6.6afdb40e.js"><link rel="prefetch" href="/design-pattern/assets/js/7.355d42a1.js"><link rel="prefetch" href="/design-pattern/assets/js/8.80af4be5.js"><link rel="prefetch" href="/design-pattern/assets/js/9.35101770.js">
    <link rel="stylesheet" href="/design-pattern/assets/css/0.styles.ed4adf79.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/design-pattern/" class="home-link router-link-active"><img src="/design-pattern/img/logo.png" alt="印客学院" class="logo"> <span class="site-name can-hide">印客学院</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/design-pattern/index.html" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="设计模式" class="dropdown-title"><span class="title">设计模式</span> <span class="arrow down"></span></button> <button type="button" aria-label="设计模式" class="mobile-dropdown-title"><span class="title">设计模式</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/design-pattern/creational/index.html" class="nav-link">
  创建者模式
</a></li></ul></div></div> <a href="https://github.com/encode-studio-fe/design-pattern" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/design-pattern/index.html" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="设计模式" class="dropdown-title"><span class="title">设计模式</span> <span class="arrow down"></span></button> <button type="button" aria-label="设计模式" class="mobile-dropdown-title"><span class="title">设计模式</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/design-pattern/creational/index.html" class="nav-link">
  创建者模式
</a></li></ul></div></div> <a href="https://github.com/encode-studio-fe/design-pattern" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/design-pattern/creational" class="sidebar-heading clickable router-link-active open"><span>创建者模式</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/design-pattern/creational/factory.html" class="sidebar-link">工厂模式</a></li><li><a href="/design-pattern/creational/abstract_factory.html" class="sidebar-link">抽象工厂模式</a></li><li><a href="/design-pattern/creational/builder.html" class="sidebar-link">生成器模式</a></li><li><a href="/design-pattern/creational/prototype.html" class="sidebar-link">原型模式</a></li><li><a href="/design-pattern/creational/singleton.html" aria-current="page" class="active sidebar-link">单例模式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/design-pattern/creational/singleton.html#结构" class="sidebar-link">结构</a></li><li class="sidebar-sub-header"><a href="/design-pattern/creational/singleton.html#适用场景" class="sidebar-link">适用场景</a></li><li class="sidebar-sub-header"><a href="/design-pattern/creational/singleton.html#优缺点" class="sidebar-link">优缺点</a></li><li class="sidebar-sub-header"><a href="/design-pattern/creational/singleton.html#与其他模式的关系" class="sidebar-link">与其他模式的关系</a></li><li class="sidebar-sub-header"><a href="/design-pattern/creational/singleton.html#代码实现" class="sidebar-link">代码实现</a></li><li class="sidebar-sub-header"><a href="/design-pattern/creational/singleton.html#测试用例" class="sidebar-link">测试用例</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="单例模式"><a href="#单例模式" class="header-anchor">#</a> 单例模式</h1> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p><strong>单例模式</strong>是一种创建型设计模式，能够保证一个类只有一个实例， 并提供一个访问该实例的全局节点。</p></div> <h2 id="结构"><a href="#结构" class="header-anchor">#</a> 结构</h2> <p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAa4AAAEiCAMAAACWWcYLAAAAkFBMVEVHcExcXFxWVlZISEhJSUl8fHzh4eH39/fp6enLy8vR0dHl5eXr6+v09PRvb2/e3t5OTk7AwMCpqalmZma2traOj4+TlJTa29vw8PDW1taDg4N2dnZTU1NaWlqurq6kpaWYmZmhoaGIiIhhYWFmZmZlZWXGx8fDw8Odnp69vb1lZWWWlpa6urqzs7PCwsLDw8MkcMvmAAAAMHRSTlMAJ6Tp///////////////////////////////////////////jwP////9wEP//tdQm1DTYAAAap0lEQVR4AeydAXOiutvFX9sDR0RiJIIBCCrcq3pXv//Xe0UqlW1bd6u29d/8ZrZO4TE4+5vGlD45/p/lbrBYLBaLxWKxWCwWi6X38Ij75PGh9/NsPeJ+efxxvh7guLxPXAcPP03XI1zeKy4ef5ougPcLYHVZXVaX1WV1WV1W1/fB6rK6+t7AJzn0+QpBYHV9J119B3vEcCQx5gtCKKvrO+lyACmhOAImZ3QNovhrdVldgUQUcOqRfZdndMVwrK4v1+Vo1giRMBVelpuCHMZK5mLW6ApCJU2k5wa5WNAvjVQF29or6+pZXWcmQzMbkgQ8VqiRfiCAHBCNrjlggCjFnjJQgATCtvaaunoP//xrdb3H0AGQL4+6RH8FeCtgwvWTLi0x4wZGR3C03gCrYYq8rb2art5//yil/v1ldb2LlwLSf9JVMJAYz5AHXDzpmgIqE5DNe9cCOTkG/GPtlXT99+/e1T//9ex711lWwLbVxRzjOSqe6nLKsowbXWuowxP8pvY6unoPhx+ss66srqVLboFlR1cBTJkedFXUqI8OA8a1qUl9KkLOK+lqJ8H/zs+CVpfOYXLA6I6uESArQHAHVOMSUFle1N+YVBvkFTC/lq56EvwT/rW69iQV9oiEHV3c5ZAKgn4OFH0HgNnRPxhMFIBIf7YuZXUdGCZJny/xgxQOGSTuocZv5LqHU4lml9tPhlbXe8ycWAAr3pjuUuOhZ3V9jAx7Ml7O5Qt5q+s8ejnZJrycy39NtrpuyuU3oe5Dl9VV86v3v67rrttCu7p+wlLjrpuuf56u+8bqgtVlJ0M7Gdqlxk/UxfvF6rK6rC6ry+qyuqwuq+uGWF39gBcyTBL/zYECXhGrqy9TXkaEPeKNgSbo83pYXdop+Dujss8/ZoNy5RVhO1CX3amu8ZyXYXW9bsDlH5PlAVve15UKXojVlYWkM0lN7gwZxBWq7cygUp4fK2PigCOxEtKEJHdK5ik5UbI+7lYz1sQYvByIflnlVTpsdOm4kmqzFyuVODy/muvn2r/B6srnZAVnl2LGCRarmeeVWBSu74TbEhMmkPNCYcoNxG4S7h/SbYSQo3zOmiSXsfv7QNrk8SSF2+hK8/VEyNFOmWJXDzOZI36uPY/VFUz3POsSAZmnDDHoTIZarplgRi6xoWhmPWH2DyZlyyjdCw26AxXYktsnXX4tZ4BtMxkehimlbmvPY3WNAJhnXRFJkdE1cJZHXUkYR1gwwZL0UdA4rDGyqiqZkR1hZXegGP1nXR7yqjIoDrqaYSaYtrXnsboCd09XV5aRulDYNbq2EPEaYaNriIJ51NQ73p6EHUoMOwNFOU91hd4e/6CrGSbEtK09j9XV0tVFBlXGDaZkVpH6VJeqWCMUX7KA3xloUQtfPOlyseCBVB2fn0JfrMvq2u6SsUyZYD1IUhTL7FRXiNLz1tyhHAziKX2xY818thyEUnQHSiC8XQ6XY0wSZrJIVhG5lt5K7xAN5rLkh3QZVfOTtzSY4/+ykzEGoEYMFDCfVkCZxkddO+oIgNDBXAKVxwQlawT2pH53IIYSEHCpDQz9DIAzpJdDDg7Pd/rH2gt02Q1Dw8RlzbRP0te/hdDow2EGzYP7dG44HWm+IBjpHfy6eFjXNCW6fmgOfQQb1ODhJoi9kb4QzHEOw/NYXbdGIIdZ3UnIkNXljycJr4/VdXusLqvr7rFtoXeAbbq+A+yWBqvL6rKToZ0M7VLDLuTtQt7qsrqsLqvL6rK6rC6ry+oKRgM3IPXwwxtIfPr8HKyurQGQJ8xyzRdoFDzLsJrLKT8Dq2sk1c7bxAFnaXBO13zD14jMUCh+BlbXBEu2nNGFGV/BxY4eVvwErC4P8TGflSzidSXVgAxmIjeZ1+h62nOSKBi1ZpLlxnFPate5JiuHn4DVFWTYa9kTVeQcVbjOFRnBmSwQNrqe9pz4BZxiOczNbGeMfq4VKck4D6yuz9iBotc5Mveoa0qWCHykZHDU1e45wYwMsSRX2La1QX2UW0ytrtvvQKnRM2n6ja6cZIG+h12rq91z0uiKoUmNRVvr17X04Fldt9+B0jDG5FnXDv0lvFZXu+ek0RXVJT7Wba2LCcnBLXVZXV1GKDq6pgjJ6VFXu0rHotnqwy0mba2ua7nC/U+GvYdH3JTHh96lulbxeLBRctTRxSrfLEWtS6aJPu45YSWSpS+Vt6tyfVJbkpxJfe+6eo+4OY+9C3XNJAC15EHX+qhgYIAMIVkC3nHPCddAxaUBqsFJbWnajT93revh5l0RroOHC3UxGCX914buD1HUj/7znhP6blAfcnnKCh5d7O5e1yNc3hgXjze5I98fMVj/6ctXGSOj714XwJsD3ORVhZCQMf8MDwus+HW6rC7tTVaaf8rK3fBaWF32z5NWl9VldVldvV9W19V0ud5Uk0Gw/ze6zet/UA+9D+oK+GF8P/iLQNE70TUxAGQ/hCIFypvoaj/z7691+Sj4QZbSzP4mUPQudM1qWTB80uXwBYMovvj1tx+E+he6xvNW10dyRLWJZjL5SKBofYFvqmsqoRIGo0ZXMOVLYjgX66qNPag9D73uqwpnfItUtLo+kiMayn5gyg8Fim7gflNdM6BRdNC1FiHpZXmeJSzEJDJ5qucGuVhcrqvzQagAG0qHR7zM5GpGTuvrj5pYz1rX6zmiDLOqLmtPMqmfMTrmiLIqybUckmkWvBUo2vaDdAJFmwu8Eij69brS2lKrK0XEAZDnMHqNA0WKPeX7uoz6C+pJ8RVdHlRYVILDXBWhEWxiPWtdr+aIMlpvF9J5PjnMzXo818ccURdbcoAVKVTwVqBo2w/SCRRtLvB6oOgX6xJwftOVQuihxGAN6fkVIh3B0fomugpjJIwJWZNJTaaiCQuNodvJ8O0cUTrq9OTqNEd0g1HTH/BuoGjbD9IJFN3AfRko+k1/uhRMlkmM18jqA+XF710tv36fDEfbrVDbbcIak/GgK0ZVVTn6ra43ckT7u3lUqfZkbfg0R7Q4fGvi9wNF236QTqDoBu7rgaJfrmsNTLu6Kqhyz+igq0R526VGOxk2AZ6OYCS9Gra6Xs8R9Y2J1kqcZoN2ckTDRlf0fqBo2w/SCRTdwH09UPTLdQ0ANQi0xxBVo8upNQV9nuhSN1rId3Qp0XwJMW1jPbu6OjmiOyQHu+3JGZLTHNEJXJJy/X6gaNsP0gkUrS/QBop+K12MAUjA3wHVuNY1BoxTZc+6doBJb/Vr8vO74hpzL4agL9UqKXZPsZ61rldzRDcovTlOdLmoVsnCPfZ0DDAmR9iQUfp2oGjbD9IJFD1coA0U/Va6giIHYBI/B4paF2cSkGXQ6vIrQNz+JtTQAYwS5NIA+YxNrGet69Uc0SAF1Mw8n+Q2B0zb0xHImNzBr43oNwNF236QTqBoc4E3AkW//p5h4tbeDl9rguko4CmJ+ym3eIcuM8E9rhu0sZ5v54gO91+6BSM3eO7pKE1A4TR1bweKtv0gbaBoe4E3A0UB+weUMhkEHMhwjeuQJSg8LHd4l+qpH6TCOaTV1cEFJMSQV2OeV+U1+0Gsrg7JduvzigSTjb5WP8j/s3MHmA7EUBhGzeTB08BsosGQ7n93bVSzgXbwyzkLGPi4LuZGrihy5ZCrRD/hVVbLtUc/kLev9tP1Vv5ylW21k4brz5iuv4/KPxgi5Rzve72LFaS1X38RuTAMAQCrBhZ5uTAMAQCrBhZ55DIMAQCsGhZ55KI3Xo4zI5dSb48zJFetZPSSa+b6H73kSsl1G73kSslVE3rJNXNF9JJr5oroJdfQPg65AtxnL7mChOR6sl8HKo7CQBjHAcYSzUcSG61EE9sq2Ar1/V/vTKzulr3lKF4BID9IBhgQ4F+kHth8sQMCzsDxSfueHnMNque4WBLw6vugRnxAr6Q/g5NYtFbjbTFXajXPiJoSs0JVsjR4VbbYz5H0h+kOC51keFvM5d9/OQkES7SAhcvf/RXfsW1s9y/Yz1yY1OGZ64z3xVyVTlJHVqcAJA2QfYax7qyqGUpHWgpl+zFNnBVmWxxqS5rPt2qqkDz3bs+B2aCvjXIjSj3gqI9bLq6mmGtHLkN92pMVPlehGCpKMVEyXCgfqDATG1x5k+ac5q5cF7i6Y1agc4+8rzHLek88B2YjUe9II6EHLnTfckF0Mde+XHhQAu+useRSHEwdMzrJr5chq+t1AVFiZus8T3TYSe/wHEuunhtSP3OVAh63LfaJucrmmcv6Sme0vSpZyJUJq6heF5yKeXLSTdOEcCl59jmWXA1A9DPXXcNzTmKfmOsiXnOBTXQLuUQjUXfbQp0xs0eseLCOl1xHdCFXFQ5OAt6RcuwTc7WWfc9lbjynEaI+VFqY0X7lSlzKC1bPd57hb7ZcJbmG6ISemtEfJB08/5R9Yq6M0pCrWKq0iihhOBOdHpZc16wLGE3kTCWI7PRbriTkyiypq6pxIrr7w1wb/2rsyPVCn/AdNxKzqgKYZOD4UlUMwMEw/APPODxjwhnjd9f/yzXZCh/Fth+EvmCnmAvJFR81aI5FOX+U7RRzcXwYxypL8b6YK4q5Yq6Y6w+7dqIivQqmcZxVXB6QSB5FFjUsxoDe/+1NTK2n+/RphnWmqR9fpxJq8YN/7fV+cv1/98klLU5GXPv9OlDZ4Mm0ih/sA2+keDCYxH4YfYm4WxzuRHwSgLBvDG5SxZ3dDE464UltGg9xNYDc9C6+rvsHcykvAaSEUygcBgjccUnuRD+3C75zCYANkwQUnwSwNzIr+hML7kUWqnsQd53BuVWA4xuFm3I8e/AKsRc8KLIfx2EwuSIBcM9+/7ru38uVHADpFSa5+AAgFVyWxXNZls5tUfiuHAAaJw0oniXKsHanBdThD2gaAEsBwDcJep+82ycBI4RwTkTGc0dC98lvfTK3XEcpnqUUMdMPtpwzvcXJcseJSh7r13X/XC7pKwBNgxvjHnf7BUHrQaX1yqq1ALA6iQeZM1vOe1utjbdcY13Z1tXR4tT+mesI8S4IjDLSGL6NMRI1UEohi6cvJQFHm+jbFMxW2HqsNbHWaiAXX4aBHNSYRpE9qGNenQJA+8u5NAWAkTEpC2illHeqqoC1vFGAIPUrV89cVx7tAMQ9161AnrmO7nPf2U7+ylUX3ngBjOS2bSnL1radGmDXW9aVVbuML0+G5hhc1evJUKY1lKI2VkyRWnFhY67RfF33z+VaMwBZrrNM4xA4lfVxbkrj+lcxHavBSy+QVG+5rBBlCFFnLrfRb6pe1JXL2EVbXTiP6lL3PZZl33edLECFlBBob3ccMflVCGtuRYR6POa3q5giW1owFXomSGyrtCp8WffP5SoLgEiLSS5U/8jlU720hO/yQGB8y/VkMQ+L0etNnLkgNjrfIiaRc17Kcm4TTuSMwfmXrwQP5ZbLajUlrzSkGp5td3Qxaolj916YWMvsuX9Z96/lCrQAesOdgFjX1bd1Pa5cpV2Y8I2hwk7zzCXFqYy5lTMm6apzG51zGoa71rqTTmslsIwppzFpIMTY2eMUZp/EOvcP7gBEJ7OeRtEBO31SIvOyA5UaK33xKij7Zd2/luu4QrWOO5PCtm0s2+auXD1etoRvIjfbEh65cpnIMu2IpGN8vokRXB9v3cmKfT0NunXS1wcGz+wuOwBZmgSEn9s4q2jeOcgoxcqipRRlk1Bk9kqg0uxUX9b9a7m2Geptknf14v3JsNxfMTjwnfakfuZStVbH03HuBLnldlQxhmMawyAw4OQchHcA6phnuXGqwNI72Xsf3HrX9/uCCMUHAEZpCsikpVyKlAAWz9QO2I0B2HzuygCWgzu+rguZhvkzuQTjPz5/Wnac2no/PELfmQzUkDhFhXeB3J+5AHlwlLSVuW8Z2wGRUmZK8wZo7h/yXJt7o6yO68q0loRTZRKwpRjcRV98s28fk5M3j/9o7AILsy+zppUw2gKGPL6vi0DqP5Nr9zNDXnGXvXl/q5GKooll7+rKKMiIF5m5UbWWkqOGVBsPlNUkugjo2fH1iW4tmJyDETgNB+VhGJGuXEf2LJ4ad2LxZFPylcv49ZHrKkYmc+0tmVRmXt7o4+u6wEH1Z3K5AcBQ40ax2nH/9DQ6dipNHeK52Wco2bzFkypU0sV7LtOY4wx9nTETtMP03hNH71X6AUghssP0lku6BIiojkxmz7ZGKVXPZIqq0buuYevMBaXDFV2oIxVyBFyaT0p0z6F9TvnLujMLxV/JZaie3xpOKsvgHjrqAlN4ykbuBoCUeJJtizgNBZjVYtfPx6Ws85x22HzXgw+AJrl8zUV2wJHbqAZSD1+EKd7tAqfYMzsci8RpJ9PtZFu1wZ2d540hAFV8/bIu0Lnjr+RSNABcwn+QJ/wbI/GdFa9dgxcBQIZgcGfM1V5CmNvRgzSAkO/Lw9yPzXXjz8PvpPm2LlTEn8lVD5ySxp/2B3J9fHJ9cn1yfXJ9fHJ9cn1y/ewzCTXJpJE0Xvr7gdy/zCuZrPFitnj+adzUgdPacYkv4dfxpZAMEKQtVtpPrh8noYDKEKjwZDJXCcT7NxisvKuYFCNeBDXM89qKFpB+xYWlebY2T9qv40upCGFZLYOi/eT6eRKqOBw0eJEHm5WtGMAkVhlC8O7cGNTjODYeN/FLLllr5Vp1pJIngNWMbCy1Wdtv40uRJ3f4wNAGPrl+nITaGWWjvyRMwWhfF2oAbpaII7GNsQCpNc/SbiqQ1COXqVJ4P2/GHZw2gC/bL+NLpmwhBGtKZS3mk+vHSahAonJRuSlVVsCKwAhjOXASAUpVplPJV+qtGKArXMoiuMdAFcusqwhAFq91yxF6nzj2Sfz3+JIofd/34LbGtrlPrh8noQppvAOSA3wFsrtybWVfMSmOSsQD6cpVqQC0/spFHixsEYCiUmohg/QL0N2pMbsp/DK+JJr3TRd3HEcun1w/TUJVDooclUnOLquF5B4YTabeqQG508lKLOWWK/iML7mqtSxV3tJ6koXLLH6bgduYTgr4dXzJrUDZgxf7J9ePk1BSKQKKNrk4+2iGQJ2pIVuTSFwlXrmi52Ffczgz1/s7w+oR6XTK3V/5StovvgO/jC/pveQ9lj3SfnL91yTUzJUakkNzQG4ILDMcNBWihomVOK5cxhd/iPss+/E9V2/QNFD0Kybvy4Ud+GV8aRT60j+5fp2EUoTgMXNVCsuKyKuWkSXjlNiJNc9c6KIcb63fcwkDjAxFCelpMRXXL77j1/Gl+5Ohopm5QmpdfnJ9n4SauZI3M5eYrcxBqlmLui4AFlbtZBl6uRL9mKt6oA0oYvaOmEqqF99/H1+auUzZU8FegG3VZf/k+pdJKEVTFsxcs4Iu3KgB2GtrBldAJr8ziX/LZZlGnbl6QaTG4hF9K97eZ9kv7L+PLyHnvKqVzikFQYk+Prm+T0JBEUaamB0gIXyLgkkplSgAU7hIWZvX0MXrK5eaz2753ES5ep6aYkmJybRmdW4riwjeV6jqU70UV+Nv40uBdNVxREcXpO+q6E+u75NQMxegyQOTlZCOU8epRqAyWQAipyvX2O6qLHmtQQJ6pDRs8FHRdz8MYDeH4d7sv40v7U0L3xQAXRKia4v85PqXSSgp5sYKvMgJT+Jt6EgY/BuJk7lOBabb9f8X40v3q/563f97uT6TUP/T3h2wuMmsURy/wFFG56ATRxWTGZMoZA0k/f4f795MiCvuzUr7Nn0beP7AUiAo5AclAA9HuCThEi7hEi5JuP5MwqX50vJc/do7tKZwfSkMDL2s0QIuoe+5bOj4beXgc+H60isGhqYSjG1aaB4vXOaLb18Yu8L2wrWyDvRrA0PTR5YdnFp8bsGlOBvxmH+q8+pqYuFaNh8YKi18GQaGdDW4oVwbGJovC6nRY7hebU9tt1TZjiSv2PDWdj89Sh8G46s7V5IZVzO8kIWHvZDVmBl3DUtV2lyFa9F8YIi+bzdpGBji8SOJ/NrA0HxZ6AgXGXzAxFegPaEKrBm2KcnsMD2qdsekHwKX9tGpwCW8sEWdVKZlhP1p56jNZdomWiRcjx0hmyWz/5tKrA0MzZeFLIo0QmlR7oDDDeaW6iwOgevxKNeT+zvXBt1m48bwwr0nldszisgSeYqWrDLhWjZfrEl3yJrw7enKG2PWBobm2ycOt8oREXozZE7xHvc4B67pURNXh93/Km8vDEy0dVhMSdCcEE/bRE8SLjIdqvDtFS5h6dYGhhZDUHEcqxZAEgFbTrlxxkVTkOOd64ycj58afUZqc3lwJWinbaInCdc1b4Y+DAwdzUeaudWBoRlXB19XEWnDIg4uvLW5NPkRmzlXNrSJH8ihjmO3beJOhReW6JrK6AdXjA3Dv5cJ1zQw1HjAp2FgKLcwtdHrA0PTslAcAchiHjFSeaN5qwLg9rxxPR6VeMAOZA2jzg6wbXihqgFT3IlSNLQHKt8J13eptlX3gSEy1z87MBSnOtyJaTKOp8miRnFRow+WZJOT6nPRiHr+bI5enU0sXH86tcTqThc/cq3cFbamcP3bnQZjDzFXKwerhet90prC9X4JlyRcwiVcwnUxNue7JFzxB0q+S8JF+o6ScAmXcAnXUPN9Eq499nybhGuXpXybhMsXYiU/NYRLuIRLu/fhEq6zMS3fJeGKTzHfJuGShEu4hOunEi7N90m4wtXyX5Rw6e3AqV+/Wn59wqVIajh+Tf2/o+X1q+VXJFwne7DD/ZJYWcDWlT2xsAWzPnKnbFt7Uz2ulqdT4crD5uGIOIm8y9qnV8u/OeE6A253vyRuLZAdIlx4wEgD41sDZ4H0cUp0PxXmCWV7Vfcj4n2y8dWTq+UXJFyDflwSazjykyth+GNxeXBNp8J1Prta3m6fXC2/IOHakQ63llya4U+EcuK6HzOyG0ylAleaOYPtk6vllyRcj0tiDaMYoWC/wkV1xUfgynY5t/2Tq+WXJFyPS2LlsBsr+B1Qf8fVfugNzuGI2Gbt2fVPrpZfkHBFnC6JayBLHczRbOmgSfeVK0XTGSBS4Yj44uD7HVevln9DwrW8JGbTKupUcyX9eUSscvXkavllCdf7908TLuESLuGShEu4hEu4JOESLuESrs+kv57rhwjN+/GfL0mSJEmSJEmSJEmS9F9nTnCR01EXMwAAAABJRU5ErkJggg==" alt="singleton_structure"></p> <ol><li>单例 （<code>Singleton</code>） 类声明了一个名为 get­Instance 获取实例的静态方法来返回其所属类的一个相同实例。</li></ol> <p>单例的构造函数必须对客户端 （<code>Client</code>） 代码隐藏。 调用 获取实例方法必须是获取单例对象的唯一方式。</p> <h2 id="适用场景"><a href="#适用场景" class="header-anchor">#</a> 适用场景</h2> <ol><li><p>如果程序中的某个类对于所有客户端只有一个可用的实例， 可以使用单例模式。</p> <ol><li>单例模式禁止通过除特殊构建方法以外的任何方式来创建自身类的对象。 该方法可以创建一个新对象， 但如果该对象已经被创建， 则返回已有的对象。</li></ol></li> <li><p>如果你需要更加严格地控制全局变量， 可以使用单例模式。</p> <ol><li>单例模式与全局变量不同， 它保证类只存在一个实例。 除了单例类自己以外， 无法通过任何方式替换缓存的实例。</li></ol> <p>请注意， 你可以随时调整限制并设定生成单例实例的数量， 只需修改 获取实例方法， 即 getInstance 中的代码即可实现。</p></li></ol> <h2 id="优缺点"><a href="#优缺点" class="header-anchor">#</a> 优缺点</h2> <h3 id="优点"><a href="#优点" class="header-anchor">#</a> 优点</h3> <ol><li>你可以保证一个类只有一个实例。</li> <li>你获得了一个指向该实例的全局访问节点。</li> <li>仅在首次请求单例对象时对其进行初始化。</li></ol> <h3 id="缺点"><a href="#缺点" class="header-anchor">#</a> 缺点</h3> <ol><li>违反了单一职责原则。 该模式同时解决了两个问题。</li> <li>单例模式可能掩盖不良设计， 比如程序各组件之间相互了解过多等。</li> <li>该模式在多线程环境下需要进行特殊处理， 避免多个线程多次创建单例对象。</li> <li>单例的客户端代码单元测试可能会比较困难， 因为许多测试框架以基于继承的方式创建模拟对象。 由于单例类的构造函数是私有的， 而且绝大部分语言无法重写静态方法， 所以你需要</li> <li>出仔细考虑模拟单例的方法。 要么干脆不编写测试代码， 或者不使用单例模式。</li></ol> <h2 id="与其他模式的关系"><a href="#与其他模式的关系" class="header-anchor">#</a> 与其他模式的关系</h2> <ol><li><p>如果你能将对象的所有共享状态简化为一个享元对象， 那么享元模式就和单例类似了。 但这两个模式有两个根本性的不同。</p> <ol><li>只会有一个单例实体， 但是享元类可以有多个实体， 各实体的内在状态也可以不同。</li> <li>单例对象可以是可变的。 享元对象是不可变的。</li></ol></li> <li><p>抽象工厂模式、 生成器模式和原型模式都可以用单例来实现。</p></li></ol> <h2 id="代码实现"><a href="#代码实现" class="header-anchor">#</a> 代码实现</h2> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>
	<span class="token keyword">private</span> <span class="token keyword">static</span> instance<span class="token operator">:</span> Singleton<span class="token punctuation">;</span>

	<span class="token keyword">private</span> <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Singleton <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>Singleton<span class="token punctuation">.</span>instance<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			Singleton<span class="token punctuation">.</span>instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> Singleton<span class="token punctuation">.</span>instance<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">public</span> <span class="token function">someBusinessLogic</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token punctuation">{</span> Singleton <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="测试用例"><a href="#测试用例" class="header-anchor">#</a> 测试用例</h2> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Singleton <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../index'</span><span class="token punctuation">;</span>

<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'singleton pattern'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'singleton instance'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		<span class="token keyword">const</span> s1 <span class="token operator">=</span> Singleton<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">const</span> s2 <span class="token operator">=</span> Singleton<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token function">expect</span><span class="token punctuation">(</span>s1 <span class="token operator">===</span> s2<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/design-pattern/creational/prototype.html" class="prev">
        原型模式
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/design-pattern/assets/js/app.de21f0f6.js" defer></script><script src="/design-pattern/assets/js/2.917b5265.js" defer></script><script src="/design-pattern/assets/js/10.92b2c58c.js" defer></script>
  </body>
</html>
