<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>代理模式 | 印客学院</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/design-pattern/img/logo.png">
    <meta name="description" content="设计模式深入浅出">
    <meta name="keywords" content="设计模式深入浅出">
    
    <link rel="preload" href="/design-pattern/assets/css/0.styles.ed4adf79.css" as="style"><link rel="preload" href="/design-pattern/assets/js/app.f3f46401.js" as="script"><link rel="preload" href="/design-pattern/assets/js/2.e7f0e45b.js" as="script"><link rel="preload" href="/design-pattern/assets/js/27.01def571.js" as="script"><link rel="prefetch" href="/design-pattern/assets/js/10.a57f37ed.js"><link rel="prefetch" href="/design-pattern/assets/js/11.2ed34f4e.js"><link rel="prefetch" href="/design-pattern/assets/js/12.3bb8f01f.js"><link rel="prefetch" href="/design-pattern/assets/js/13.05bae820.js"><link rel="prefetch" href="/design-pattern/assets/js/14.14bd8d9c.js"><link rel="prefetch" href="/design-pattern/assets/js/15.b7b0c8fe.js"><link rel="prefetch" href="/design-pattern/assets/js/16.fbb35ffb.js"><link rel="prefetch" href="/design-pattern/assets/js/17.7a9d2e5b.js"><link rel="prefetch" href="/design-pattern/assets/js/18.95c626aa.js"><link rel="prefetch" href="/design-pattern/assets/js/19.85e9c94d.js"><link rel="prefetch" href="/design-pattern/assets/js/20.2a4da362.js"><link rel="prefetch" href="/design-pattern/assets/js/21.30566765.js"><link rel="prefetch" href="/design-pattern/assets/js/22.28375943.js"><link rel="prefetch" href="/design-pattern/assets/js/23.dba9c6fa.js"><link rel="prefetch" href="/design-pattern/assets/js/24.3de55ed3.js"><link rel="prefetch" href="/design-pattern/assets/js/25.fce6c3c0.js"><link rel="prefetch" href="/design-pattern/assets/js/26.78a83bc1.js"><link rel="prefetch" href="/design-pattern/assets/js/28.4246843a.js"><link rel="prefetch" href="/design-pattern/assets/js/29.256c7b86.js"><link rel="prefetch" href="/design-pattern/assets/js/3.1d1255e9.js"><link rel="prefetch" href="/design-pattern/assets/js/30.6ae63bd3.js"><link rel="prefetch" href="/design-pattern/assets/js/31.aa731dc0.js"><link rel="prefetch" href="/design-pattern/assets/js/32.ae53e7c5.js"><link rel="prefetch" href="/design-pattern/assets/js/4.7f118de9.js"><link rel="prefetch" href="/design-pattern/assets/js/5.68e28a7d.js"><link rel="prefetch" href="/design-pattern/assets/js/6.f66407ce.js"><link rel="prefetch" href="/design-pattern/assets/js/7.fc36c5ff.js"><link rel="prefetch" href="/design-pattern/assets/js/8.15e9e01e.js"><link rel="prefetch" href="/design-pattern/assets/js/9.c6d1e41c.js">
    <link rel="stylesheet" href="/design-pattern/assets/css/0.styles.ed4adf79.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/design-pattern/" class="home-link router-link-active"><img src="/design-pattern/img/logo.png" alt="印客学院" class="logo"> <span class="site-name can-hide">印客学院</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/design-pattern/index.html" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="设计模式" class="dropdown-title"><span class="title">设计模式</span> <span class="arrow down"></span></button> <button type="button" aria-label="设计模式" class="mobile-dropdown-title"><span class="title">设计模式</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/design-pattern/creational/index.html" class="nav-link">
  创建者模式
</a></li><li class="dropdown-item"><!----> <a href="/design-pattern/structural/index.html" class="nav-link">
  结构型模式
</a></li><li class="dropdown-item"><!----> <a href="/design-pattern/behavioral/index.html" class="nav-link">
  行为模式
</a></li></ul></div></div> <a href="https://github.com/encode-studio-fe/design-pattern" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/design-pattern/index.html" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="设计模式" class="dropdown-title"><span class="title">设计模式</span> <span class="arrow down"></span></button> <button type="button" aria-label="设计模式" class="mobile-dropdown-title"><span class="title">设计模式</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/design-pattern/creational/index.html" class="nav-link">
  创建者模式
</a></li><li class="dropdown-item"><!----> <a href="/design-pattern/structural/index.html" class="nav-link">
  结构型模式
</a></li><li class="dropdown-item"><!----> <a href="/design-pattern/behavioral/index.html" class="nav-link">
  行为模式
</a></li></ul></div></div> <a href="https://github.com/encode-studio-fe/design-pattern" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/design-pattern/creational" class="sidebar-heading clickable"><span>创建者模式</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/design-pattern/structural" class="sidebar-heading clickable router-link-active open"><span>结构型模式</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/design-pattern/structural/adapter.html" class="sidebar-link">适配器模式</a></li><li><a href="/design-pattern/structural/bridge.html" class="sidebar-link">桥接模式</a></li><li><a href="/design-pattern/structural/composite.html" class="sidebar-link">组合模式</a></li><li><a href="/design-pattern/structural/decorator.html" class="sidebar-link">装饰模式</a></li><li><a href="/design-pattern/structural/facade.html" class="sidebar-link">外观模式</a></li><li><a href="/design-pattern/structural/flyweight.html" class="sidebar-link">享元模式</a></li><li><a href="/design-pattern/structural/proxy.html" aria-current="page" class="active sidebar-link">代理模式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/design-pattern/structural/proxy.html#结构" class="sidebar-link">结构</a></li><li class="sidebar-sub-header"><a href="/design-pattern/structural/proxy.html#适用场景" class="sidebar-link">适用场景</a></li><li class="sidebar-sub-header"><a href="/design-pattern/structural/proxy.html#优缺点" class="sidebar-link">优缺点</a></li><li class="sidebar-sub-header"><a href="/design-pattern/structural/proxy.html#与其他模式的关系" class="sidebar-link">与其他模式的关系</a></li><li class="sidebar-sub-header"><a href="/design-pattern/structural/proxy.html#代码实现" class="sidebar-link">代码实现</a></li><li class="sidebar-sub-header"><a href="/design-pattern/structural/proxy.html#测试用例" class="sidebar-link">测试用例</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/design-pattern/behavioral" class="sidebar-heading clickable"><span>行为模式</span> <span class="arrow right"></span></a> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="代理模式"><a href="#代理模式" class="header-anchor">#</a> 代理模式</h1> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p><strong>代理模式</strong>是一种结构型设计模式， 让你能够提供对象的替代品或其占位符。 代理控制着对于原对象的访问， 并允许在将请求提交给对象前后进行一些处理。</p></div> <h2 id="结构"><a href="#结构" class="header-anchor">#</a> 结构</h2> <p><img src="data:image/png;base64,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" alt="proxy_structure"></p> <ol><li>服务接口 （<code>Service Interface</code>） 声明了服务接口。 代理必须遵循该接口才能伪装成服务对象。</li> <li>服务 （<code>Service</code>） 类提供了一些实用的业务逻辑。</li> <li>代理 （<code>Proxy</code>） 类包含一个指向服务对象的引用成员变量。 代理完成其任务 （例如延迟初始化、 记录日志、 访问控制和缓存等） 后会将请求传递给服务对象。</li> <li>客户端 （<code>Client</code>） 能通过同一接口与服务或代理进行交互， 所以你可在一切需要服务对象的代码中使用代理。</li></ol> <h2 id="适用场景"><a href="#适用场景" class="header-anchor">#</a> 适用场景</h2> <ol><li><p>延迟初始化 （虚拟代理）。 如果你有一个偶尔使用的重量级服务对象， 一直保持该对象运行会消耗系统资源时， 可使用代理模式。</p> <ol><li>你无需在程序启动时就创建该对象， 可将对象的初始化延迟到真正有需要的时候。</li></ol></li> <li><p>访问控制 （保护代理）。 如果你只希望特定客户端使用服务对象， 这里的对象可以是操作系统中非常重要的部分， 而客户端则是各种已启动的程序 （包括恶意程序）， 此时可使用代理模式。</p> <ol><li>代理可仅在客户端凭据满足要求时将请求传递给服务对象。</li></ol></li> <li><p>本地执行远程服务 （远程代理）。 适用于服务对象位于远程服务器上的情形。</p></li> <li><p>在这种情形中， 代理通过网络传递客户端请求， 负责处理所有与网络相关的复杂细节。</p></li> <li><p>记录日志请求 （日志记录代理）。 适用于当你需要保存对于服务对象的请求历史记录时。</p> <ol><li>代理可以在向服务传递请求前进行记录。</li></ol></li> <li><p>缓存请求结果 （缓存代理）。 适用于需要缓存客户请求结果并对缓存生命周期进行管理时， 特别是当返回结果的体积非常大时。</p> <ol><li>代理可对重复请求所需的相同结果进行缓存， 还可使用请求参数作为索引缓存的键值。</li></ol></li> <li><p>智能引用。 可在没有客户端使用某个重量级对象时立即销毁该对象。</p> <ol><li>代理会将所有获取了指向服务对象或其结果的客户端记录在案。 代理会时不时地遍历各个客户端， 检查它们是否仍在运行。 如果相应的客户端列表为空， 代理就会销毁该服务对象， 释放底层系统资源。</li></ol></li></ol> <h2 id="优缺点"><a href="#优缺点" class="header-anchor">#</a> 优缺点</h2> <h3 id="优点"><a href="#优点" class="header-anchor">#</a> 优点</h3> <ol><li>你可以在客户端毫无察觉的情况下控制服务对象。</li> <li>如果客户端对服务对象的生命周期没有特殊要求， 你可以对生命周期进行管理。</li> <li>即使服务对象还未准备好或不存在， 代理也可以正常工作。</li> <li>开闭原则。 你可以在不对服务或客户端做出修改的情况下创建新代理。</li></ol> <h3 id="缺点"><a href="#缺点" class="header-anchor">#</a> 缺点</h3> <p>1.代码可能会变得复杂， 因为需要新建许多类。 2. 服务响应可能会延迟。</p> <h2 id="与其他模式的关系"><a href="#与其他模式的关系" class="header-anchor">#</a> 与其他模式的关系</h2> <ol><li>适配器模式能为被封装对象提供不同的接口， 代理模式能为对象提供相同的接口， 装饰模式则能为对象提供加强的接口。</li> <li>外观模式与代理的相似之处在于它们都缓存了一个复杂实体并自行对其进行初始化。 代理与其服务对象遵循同一接口， 使得自己和服务对象可以互换， 在这一点上它与外观不同。</li> <li>装饰和代理有着相似的结构， 但是其意图却非常不同。 这两个模式的构建都基于组合原则， 也就是说一个对象应该将部分工作委派给另一个对象。 两者之间的不同之处在于代理通常自行管理其服务对象的生命周期， 而装饰的生成则总是由客户端进行控制。</li></ol> <h2 id="代码实现"><a href="#代码实现" class="header-anchor">#</a> 代码实现</h2> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Subject</span> <span class="token punctuation">{</span>
	<span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">RealSubject</span> <span class="token keyword">implements</span> <span class="token class-name">Subject</span> <span class="token punctuation">{</span>
	<span class="token keyword">public</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token string">'RealSubject: Handling request.'</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">ProxyPattern</span> <span class="token keyword">implements</span> <span class="token class-name">Subject</span> <span class="token punctuation">{</span>
	<span class="token keyword">private</span> realSubject<span class="token operator">:</span> RealSubject<span class="token punctuation">;</span>

	<span class="token function">constructor</span><span class="token punctuation">(</span>realSubject<span class="token operator">:</span> RealSubject<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>realSubject <span class="token operator">=</span> realSubject<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">public</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">checkAccess</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">logAccess</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>realSubject<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">private</span> <span class="token function">checkAccess</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token punctuation">{</span>
		<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Proxy: Checking access prior to firing a real request.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">private</span> <span class="token function">logAccess</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
		<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Proxy: Logging the time of request.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token punctuation">{</span> Subject<span class="token punctuation">,</span> RealSubject<span class="token punctuation">,</span> ProxyPattern <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="测试用例"><a href="#测试用例" class="header-anchor">#</a> 测试用例</h2> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> RealSubject<span class="token punctuation">,</span> ProxyPattern <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../index'</span><span class="token punctuation">;</span>

<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'proxy pattern'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'proxy concrete'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		<span class="token keyword">const</span> realSubject <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RealSubject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">const</span> proxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ProxyPattern</span><span class="token punctuation">(</span>realSubject<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token function">expect</span><span class="token punctuation">(</span>realSubject<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token string">'RealSubject: Handling request.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">expect</span><span class="token punctuation">(</span>proxy<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token string">'RealSubject: Handling request.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/design-pattern/structural/flyweight.html" class="prev">
        享元模式
      </a></span> <span class="next"><a href="/design-pattern/behavioral/responsibility.html">
        责任链模式
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/design-pattern/assets/js/app.f3f46401.js" defer></script><script src="/design-pattern/assets/js/2.e7f0e45b.js" defer></script><script src="/design-pattern/assets/js/27.01def571.js" defer></script>
  </body>
</html>
